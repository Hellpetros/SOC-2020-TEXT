\chapter{Průběh vývoje ProtoPlantu}
Za dobu vývoje ProtoPlant prošel můj systém spoustou velkých změn.
Vývoj byl započat začátkem roku 2018.
Za tu dobu vyšlo již několik verzí softwaru i hardwaru.

\section{ProtoPlant x1.0 až x4.0 (tzv. legacy verze)}
Původní verze ProtoPlantu byly celkem 4 stabilní a několik vývojových.
Tyto 4 stabilní verze jsou ve zkratce popsány níže.

\subsection{Verze x1.0}
Nejstarší funkční verze ProtoPlantu, založená na Arduinu DUE. 
Jeho software tvořilo jedno, stále se opakující vlákno.
Nevýhodou tohoto postupu bylo nepřesné časování některých úkonů způsobeném používáním blokujících operací.
Tato verze byla pouze shluk kabelů, přes které byly k Arduinu připojeny jednotlivé moduly senzorů.
Byla schopna pouze měřit teplotu a s pomocí relátek ovládat aktuátory, které následně otevíraly, nebo zavíraly okna.
Inverze polarity napájení byla řešena použitím třech relé.
Dvou, která křížově spínala kladný pól napájení aktuátorů a třetího, který připojoval zemnící vodič.
Toto zapojení nebylo zcela ideální, vzhledem k nutnosti použití tří relé a tedy i velkému úbytku napětí.
Použité Arduino bohužel další vývoj nepřežilo.

\subsection{Verze x2.0}
Největší změnou oproti předchozí verzi byl přechod z Arduina na ESP32 devkitC.
Software byl kompletně přepsán a blokující funkce odstraněny.
Díky tomu běžel software mnohem plynuleji.
Co se týče hardwaru, tato verze již používala první prototyp základní desky, který byl osazen na univerzálním tištěném spoji.
Zároveň jsem přidal podporu LCD znakového displaye, na který se vypisovaly naměřené hodnoty ze senzorů a různé stavové hlášky.
Během vývoje této verze jsem také systém začal nazývat ProtoPlant.

\subsection{Verze x3.0 a další}
Tato verze byla v minulém roce prezentována na okresním kole SOČ.
Kromě několika prototypů základní desky, které se při jejím vývoji vystřídaly, došlo i k mnohým změnám ve funkci celého ProtoPlantu.
Doposud používaná relé, kterými ProtoPlant spínal aktuátory, bylo nutno nahradit jiným řešením.
Důvodem k tomu byl jejich příliš velký úbytek napětí, který způsoboval podpětí celé řídící elektroniky.
Hledal jsem tedy způsob, jak vyřešit spínání aktuátorů tak, aby byl napěťový úbytek co nejmenší.
Nakonec jsem objevil H-můstky VNH2SP30. 
Ty umožňují kromě regulace výstupního napětí velmi jednoduše obracet polaritu výstupů.
Pro zjednodušení zapojení při testování jsem využíval Monster Moto Shield, na kterém jsou tato VNH osazena hned dvě.
Proto mne napadlo využít druhé VNH jako víceúčelový výstup, ke kterému lze připojit čerpadlo, elektromagnetický ventil, případně jiná zařízení.
V softwaru přibyla podpora tlačítek a menu zobrazované na LCD displeji, přes které se dalo měnit nastavení systému za chodu.
Dále jsem ProtoPlant uzavřel do průmyslového elektroinstalačního boxu s krytím IP67.
Do víka boxu jsem nainstaloval LCD displej a ovládací tlačítka.

\paragraph{Verze x3.1}
byla další ze stabilních verzí zaměřená primárně na opravu softwarových chyb.
Tuto verzi jsem v minulém roce prezentoval v krajském kole SOČ.
Menu nastavení bylo přeloženo do češtiny.

\paragraph{Verze x3.2}
byla verzí prezentovanou na loňské celostátní přehlídce.

\section{ProtoPlant verze 5.0}


\newpage