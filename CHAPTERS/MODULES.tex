\chapter{Jednotlivé moduly PROTOPlantu}
PROTOPlant je modulární systém -- není tedy jedním velkým celkem se všemi funkcemi přímo zaintegrovanými.
V~této kapitole se zaměřím na podrobný popis jednotlivých modulů.

\section{Řídící jednotka (PPCU)}
PPCU, neboli řídící jednotka je hlavním modulem celého systému.
Samotné PPCU tvoří elektroinstalační box s~krytím IP65.
Na přední části se nachází ovládací panel s~LCD displejem a ovládacími tlačítky.
Z~bočních stran jsou instalovány vodotěsné průchodky pro provlečení kabelů.

Uvnitř se nachází základní deska (viz \autoref{subsec:motherBoard}) a zdroj napájení.

\section{Přídavné moduly PROTOPlantu}
Kromě samotné řídící elektroniky je možno PROTOPlant rozšířit i o~přídavné moduly. 
Na vývoji těchto modulů se zatím stále pracuje.
Těchto modulů existuje hned několik:

\begin{itemize}
    \item Komunikační a napájecí modul (CIPM -- Communication Interface and Power Module -- modul potřebný pro drátové připojení ostatních modulů, viz \autoref{subsec:CIPM})
    \item Napájecí rozdělovač (PSpl -- Power Splitter)
    \item Modul určený pro měření půdní vlhkosti (SHSM -- Soil Humidity Sensorics Module -- modul vybavený senzory pro měření vlhkosti půdy, viz \autoref{subsec:SHSM})
    \item Modul rozšíření pokrytí senzorikou (SEM -- Sensorics Expansion Module -- modul pro zvýšení počtu senzorů připojených k~PROTOPlantu, viz \autoref{subsec:SEM})
    \item Modul ovládání čerpadel (PCM -- Pump Control Module -- modul pro sledování hladiny vody v~nádrži a ovládání čerpadla, viz \autoref{subsec:PCM})
    \item Modul vzdáleného ovládání (RCM -- Remote Control Module -- modul pro připojení vzdáleného ovládacího panelu, viz \autoref{subsec:RCM})
\end{itemize}
Zjednodušené schéma zapojení a funkce jednotlivých modulů naleznete na \autoref{fig:add-MODULES}.

\paragraph{Napájení přídavných modulů}
je prováděno ve čtyřech režimech.
\begin{itemize}
    \item napájení přímo z~řídící jednotky
    \item napájení z~externího zdroje přes CIPM
    \item napájení přes PSpl
    \item napájení každého modulu odděleně
\end{itemize}

\subparagraph{Napájení přimo z~řídící jednotky}
je možno použít pouze tehdy, když je připojen maximálně jeden modul a to z~důvodu, aby bylo zabráněno podpětí celého systému.
Modul je takto připojen přímo k~napájecímu okruhu A~řídící jednotky (viz \autoref{par:PowerCircuitA}).

\subparagraph{Použití externího zdroje připojeného k~CIPM}
\label{subpar:suplyingViaCIPM}
je použitelné v~případě, kdy uživatel upřednostňuje kabelovou komunikaci mezi moduly a řídící jednotkou.
Při napájení v~tomto režimu je počet připojitelných modulů omezen pouze výkonem zdroje napájení připojeného k~CIPM.
Na vstupní napájecí svorkovnici je připojen externí zdroj. 
Kromě dvou kabelů pro komunikaci jsou na výstupu připojeny i napájecí kabely od jednotlivých modulů.

\subparagraph{Napájení přes PSpl}
funguje na velmi podobném principu, jako předchozí varianta. 
K~PSpl je na vstupní svorkovnici připojen externí zdroj napájení.
Na výstupních svorkovnicích jsou připojeny napájecí kabely jednotlivých modulů.
Tato metoda je určena primárně pro bezdrátovou komunikaci mezi řídící jednotkou a moduly.

\subparagraph{Napájení každého modulu odděleně}
je nejjednodušší metoda napájení.
Každý z~modulů je připojen vlastním kabelem přímo k~napájecímu zdroji.
Primárně je určena pro bezdrátovou komunikaci mezi jednotlivými moduly. 

\subsection{Komunikační a napájecí modul -- CIPM}
\label{subsec:CIPM}
Tento modul funguje jako propojovací uzel mezi řídící jednotkou a všemi přídavnými moduly.
Dále slouží pro připojení externího napájení pro jednotlivé další moduly (viz \autoref{subpar:suplyingViaCIPM}).

\subsection{Modul měření vlhkosti půdy -- SHSM}
\label{subsec:SHSM}
Modul určený pro připojení senzorů měřících vlhkost půdy.
Tento modul je zatím stále ve stádiu konceptu.

\subsection{Modul rozšíření senzoriky -- SEM}
\label{subsec:SEM}
Modul určený pro zvýšení pokrytí prostoru skleníku přidáním dalších enviromentálních senzorů.
Pro malé, případně středně velké skleníky není tento modul potřebný. 
Ve velkých sklenících již své uplatnění najde vzhledem k~tomu, že je vybaven vlastní řídící elektronikou a jediným omezením je dosah zvoleného způsobu komunikace s~řídící jednotkou.

\subsection{Modul řízení čerpadel -- PCM}
\label{subsec:PCM}
Valná většina zahrádkářů má pro svůj skleník i nádrž na vodu.
Tento modul je určen pro sledování hladiny vody v~ní a případné spínání čerpadla, které má za úkol v~nádrži vodu doplňovat.

\subsection{Modul vzdáleného ovládání -- RCM}
\label{subsec:RCM}
Byl vytvořen pro zjednodušení nastavení a ovládání PROTOPlantu.
Skládá se ze dvou částí. 
Komunikační části, kterou lze připojit k~základní desce PROTOPlantu a ovládacího panelu. 
Uživatel ovládací panel nainstaluje na zeď přímo v~domě a může díky němu vzdáleně ovládat celýPROTOPlant přímo z~pohodlí domova. 

\subsection{Uložení řídící elektroniky}
Řídící elektronika (základní deska, řadiče, kabeláž atp.) je uložena v~průmyslových elektroinstalačních boxech s~krytím IP65 (\It{úplná prachotěsnost a odolnost proti tryskající vodě} \cite{IP_ratings}).
Vyvedení kabelů z~těchto boxů je řešeno s~pomocí kabelových průchodek se stejnou úrovní krytí.

Upevnění řídící elektroniky do těchto boxů je řešena díly vytisknutými na 3D tiskárně z~materiálu PET-G.
Ten jsem zvolil pro jeho odolnost a nehygrofilnost.

Konstrukci pro upevnění tvoří zpravidla 2 části:
\begin{itemize}
    \item montážní deska
    \item kabelový unašeč
\end{itemize}

\noindent\B{Montážní deska} je největší částí celého držáku. 
Na spodní straně se nachází drážky pro správné umístění do boxu.
Z~jedné z~bočních stran se nachází drážky pro umístění kartuše se silikagelem.
Ze strany směřující do volného prostoru boxu se nacházejí výstupky, které se zasunou do drážek v~montážní desce pro zdroj.
Na horní straně jsou umístěny otvory pro připevnění základní desky a drážky pro upevnění kabelových unašečů.

\noindent\B{Kabelové unašeče} jsou částí složenou z~více menších dílů.
Jejich úkolem je upevnění kabelů do větších svazků pro vyšší přehlednost.

%\section{Ochrana elektroniky před přehřátím a vlhkostí}
%To be done.

\newpage